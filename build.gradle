/*
 * user guide available at https://docs.gradle.org/4.3.1/userguide/tutorial_java_projects.html
 */

apply plugin: 'java'
apply plugin: 'org.junit.platform.gradle.plugin'
apply plugin: 'project-report'

defaultTasks 'clean', 'test'

sourceSets {
    main {
        java { srcDir 'src' }
        resources { srcDir 'src' }
    }
    test {
        java { srcDir 'test' }
        resources { srcDir 'test' }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'info.cukes:cucumber-java:1.2.5'
    compile 'info.cukes:cucumber-junit:1.2.5'
    compile 'junit:junit:4.12'
    compile 'com.codeborne:selenide:4.5.1'
    compile 'org.apache.maven.plugins:maven-surefire-report-plugin:2.20.1'
}

configurations {
    agent
}

test {
    systemProperties = [
            'selenide.browser': 'firefox',
            'selenide.baseUrl' : 'http://localhost:8080/pentaho',
            'selenide.timeout': '1000',
            'selenide.reopenBrowserOnFail': 'false'
    ]
    testLogging.showStandardStreams = true
}

task PUCTest(type: Test) {
    useJUnit() {
        suites "src/test/resources/PUC_FunctionalTest_Login.xml"
    }
}

task ie(type: Test) {
    systemProperties['browser'] = 'ie'
}

task htmlunit(type: Test) {
    systemProperties['browser'] = 'htmlunit'
}

task chrome(type: Test) {
    systemProperties['browser'] = 'chrome'
}

task phantomjs(type: Test) {
    systemProperties['browser'] = 'phantomjs'
}