/*
 * user guide available at https://docs.gradle.org/4.3.1/userguide/tutorial_java_projects.html
 */

apply plugin: 'java'
apply plugin: 'application'

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    compile 'com.google.guava:guava:23.0'
    compile 'org.testng:testng:6.10'
    compile 'org.hamcrest:hamcrest-all:1.3'
    compile 'com.codeborne:selenide:4.8'
}

task PUCTest(type: Test) {
    useTestNG() {
        suites "src/test/resources/PUC_FunctionalTest_Login.xml"
    }
}

task ie(type: Test) {
    systemProperties['browser'] = 'ie'
}

task htmlunit(type: Test) {
    systemProperties['browser'] = 'htmlunit'
}

task chrome(type: Test) {
    systemProperties['browser'] = 'chrome'
}

task phantomjs(type: Test) {
    systemProperties['browser'] = 'phantomjs'
}

tasks.withType(Test).all { testTask ->
    testTask.systemProperties['file.encoding'] = 'UTF-8'
    testTask.testLogging.showStandardStreams = true
    testTask.outputs.upToDateWhen { false }
}

test {
    useTestNG {
        preserveOrder true
        excludeGroups 'integrationTests'
        includeGroups 'unitTests'
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.3.1'
    jarFile = '.gradle/wrapper/gradle-wrapper.jar'
    scriptFile = './gradle'
}